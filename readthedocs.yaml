# readthedocs.yaml
version: 2
build:
  os: ubuntu-22.04
  tools:
    python: "3.9"

  # Installing Poetry after the environment is created
  post_create_environment:
    - pip install poetry

  # Installing your dependencies using Poetry with the dev flag
  post_install:
    # VIRTUAL_ENV needs to be set manually as per the current workaround
    # https://github.com/readthedocs/readthedocs.org/pull/11152/
    - VIRTUAL_ENV=$READTHEDOCS_VIRTUALENV_PATH poetry install --with dev

# Sphinx configuration
sphinx:
  configuration: docs/source/conf.py  # Correctly pointing to conf.py

